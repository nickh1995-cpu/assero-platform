(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[556],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},6545:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(5155),a=t(2115),i=t(63),l=t(6648);function n(){let e=(0,i.useRouter)(),s=(0,l.c)(),[t,n]=(0,a.useState)(!0),[u,c]=(0,a.useState)([]),[d,o]=(0,a.useState)(null);async function m(t){if(t.preventDefault(),o(null),!s)return void o("Plattform wird konfiguriert. Bitte versuchen Sie es sp\xe4ter erneut.");let r=new FormData(t.currentTarget),a=String(r.get("title")||"").trim(),i=String(r.get("description")||"").trim(),l=String(r.get("category_id")||"");if(!a||!l)return void o("Titel und Kategorie sind erforderlich");try{var n;let{data:t}=await s.auth.getUser(),r=null==(n=t.user)?void 0:n.id,{data:c,error:d}=await s.from("assets").insert({title:a,description:i,category_id:l,owner_id:r,status:"draft"}).select("id, category_id").single();if(d)return void o(d.message);let m=null==c?void 0:c.id,h=u.find(e=>e.id===l);(null==h?void 0:h.slug)==="real-estate"?e.push("/list/create/real-estate/".concat(m)):e.push("/dashboard")}catch(e){o("Fehler beim Erstellen des Inserats. Bitte versuchen Sie es erneut.")}}return((0,a.useEffect)(()=>{(async()=>{try{if(!s){c([{id:"1",name:"Real Estate",slug:"real-estate"},{id:"2",name:"Luxusuhren",slug:"luxusuhren"},{id:"3",name:"Fahrzeuge",slug:"fahrzeuge"}]),n(!1);return}let{data:t}=await s.auth.getUser();if(!t.user)return void e.push("/sign-in");let{data:r}=await s.from("asset_categories").select("id, name, slug").eq("is_active",!0).order("sort_order");c(null!=r?r:[]),n(!1)}catch(e){c([{id:"1",name:"Real Estate",slug:"real-estate"},{id:"2",name:"Luxusuhren",slug:"luxusuhren"},{id:"3",name:"Fahrzeuge",slug:"fahrzeuge"}]),n(!1)}})()},[]),t)?(0,r.jsx)("main",{className:"section padded",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("p",{children:"L\xe4dtâ€¦"})})}):(0,r.jsx)("main",{className:"section padded light",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("h1",{className:"section-title",children:"Listing erstellen"}),(0,r.jsxs)("form",{onSubmit:m,className:"feature-grid",style:{gridTemplateColumns:"1fr"},children:[(0,r.jsxs)("div",{className:"feature",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Titel"}),(0,r.jsx)("input",{name:"title",required:!0,placeholder:"Kurzer Titel",className:"w-full rounded-md border px-4 py-3"})]}),(0,r.jsxs)("div",{className:"feature",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Beschreibung"}),(0,r.jsx)("textarea",{name:"description",rows:4,placeholder:"Beschreibung",className:"w-full rounded-md border px-4 py-3"})]}),(0,r.jsxs)("div",{className:"feature",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Kategorie"}),(0,r.jsxs)("select",{name:"category_id",required:!0,className:"w-full rounded-md border px-4 py-3",defaultValue:"",children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Bitte w\xe4hlen"}),u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),d?(0,r.jsx)("p",{className:"text-sm",style:{color:"#b91c1c"},children:d}):null,(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"slide-cta",type:"submit",children:"Als Entwurf speichern"})})]})]})})}},6648:(e,s,t)=>{"use strict";t.d(s,{c:()=>i});var r=t(7559);let a=null;function i(){if(a)return a;try{let e="https://jbfmdooljpcbzfjcewjs.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpiZm1kb29sanBjYnpmamNld2pzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwNDg0ODEsImV4cCI6MjA3MTYyNDQ4MX0.HlfMnatW1DTChJRwBH4_jpvJlTO0MeVjp96Xc4LceGQ";if(!e||!s)return null;return a=(0,r.createBrowserClient)(e,s)}catch(e){return null}}},8300:(e,s,t)=>{Promise.resolve().then(t.bind(t,6545))}},e=>{e.O(0,[559,441,255,358],()=>e(e.s=8300)),_N_E=e.O()}]);